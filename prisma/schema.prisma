datasource db {
  provider = "sqlite"
  url      = "file:./dev.db?timeout=60000"
}

generator client {
  provider = "prisma-client-js"
}

model Product {
  id                           String    @id @default(cuid())
  sku                          String?   @unique
  name                         String?
  supplierName                 String?
  supplierLink                 String?
  priceComment                 String?
  stock                        Int?
  purchasePriceWithoutShipping Float?
  purchasePriceWithShipping    Float?
  purchaseDate                 DateTime?
  salePrice                    Float?
  price                        Int?
  sizeLength                   Int?
  sizeWidth                    Int?
  cartonComment                String?
  cartonSize                   String?
  moq                          Int?
  weight                       Float?
  material                     String?
  seaShipping                  String?
  trainShipping                String?
  airShipping                  String?
  ddpShipping                  String?
  sparksOfSindri               String?
  starGater                    String?
  olx                          String?
  nameEN                       String?
  namePL                       String?
  descriptionPL                String?
  descriptionEN                String?
  gptPrompt                    String?
  vinted                       String?
  de                           String?
  asin                         String?
  alternativeName              String?
  alternativeDescriptionPL     String?
  alternativeDescriptionEN     String?
  createdAt                    DateTime  @default(now())
  updatedAt                    DateTime  @updatedAt
  images                       ProductImage[]
}

model ImageFile {
  id          String        @id @default(cuid())
  filename    String
  filepath    String
  mimetype    String
  size        Int
  width       Int?
  height      Int?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  products    ProductImage[] // Relation to the join table
}

model ProductImage {
  productId   String
  imageFileId String
  assignedAt  DateTime @default(now())

  product     Product   @relation(fields: [productId], references: [id], onDelete: Cascade)
  imageFile   ImageFile @relation(fields: [imageFileId], references: [id], onDelete: Cascade)

  @@id([productId, imageFileId])
}